set G=Sp(4,R)
set v=[1,1]/2
set (H,M,Hd)=endoscopic_group(G,v)
set H=split_form(H)
set rm=root_map(H,G)

set ss=unipotent_stable_sums(H)
set P0=ss[2]
set (a0,b0)=pick_basepoint_lift(last_param(P0),M,G)
set P1=ss[1]
set (a1,b1)=pick_basepoint_lift(last_param(P1),M,G)
set P2=ss[2]
set (a2,b2)=pick_basepoint_lift(last_param(P2),M,G)
set lifts2=embed_parameters(a2,b2,rm)
set P3=ss[3]
set (a3,b3)=pick_basepoint_lift(last_param(P3),M,G)
set lifts3=embed_parameters(a3,b3,rm)

{this function fails: }
{set z=endoscopic_lift_unipotents(H,M,G,rm,v)}

set m=[[2],[0]]

{need to use different root maps for i=4,5}
set root_maps=[rm,rm,rm,m,m,rm,rm,rm,rm]
void:for i:9 do
prints(new_line,"lift #", i, ":",new_line, "P_H=", ss[i], new_line, "lift: ");
for (a,b) in endoscopic_lift(ss[i],M,G,root_maps[i],v)  do prints("coefficient matrix=",a, new_line,"lift: ",b) od od
